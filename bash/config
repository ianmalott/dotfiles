#!/bin/bash

# Include color variables
. ~/.dotfiles/bash/colors

function parse_git_branch {
  git branch --no-color 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/\1/'
}

# Terminal Prompt
if [ "$color_prompt" = yes ]; then
  PS1="\n\[$BLD_WHI\]\u\[$BLD_RED\]@\h \[$BLD_YEL\]\w\[$BLD_BLA\] \$(parse_git_branch) \n\[$BLD_BLA\]❯\[$RESET_TEXT\] "
else
  PS1="\n\u@\h \w \$(parse_git_branch) \n❯ "
fi
unset color_prompt

# Window Title
case "$TERM" in
  xterm*|rxvt*)
    PS1="\[\e]0;\u@\h: \w  \$(parse_git_branch)\a\]$PS1";;
  *)
    ;;
esac

# enable programmable completion features
if [ -f /etc/bash_completion ]; then
  . /etc/bash_completion
fi


#-------------------------------------------------------------------------------
# The following are useful for remote accounts
#-------------------------------------------------------------------------------

#SSHAGENT=/usr/bin/ssh-agent
#SSHAGENTARGS="-s"
#if [ -z "$SSH_AUTH_SOCK" -a -x "$SSHAGENT" ]; then
#  eval `$SSHAGENT $SSHAGENTARGS`
#  trap "kill $SSH_AGENT_PID" 0
#fi

## Prompt to cache private key password for session
#echo -en "\033[34m"
#read -p "Add private key to ssh-agent? (y/n): "
#echo -en "\033[0m"
#[ "$REPLY" == "y" ] && ssh-add ~/.ssh/id_rsa

## Symlink ssh auth sock for screen
#if [ -n $SSH_AUTH_SOCK ]; then
#  ln -sf "$SSH_AUTH_SOCK" "$HOME/tmp/ssh-agent-$USER-screen"
#fi
