#!/usr/bin/env bash

# General
alias b='bundle exec'
alias gr='grep -rn'
alias grep='grep -I --color'
alias grepn='grep -n'
alias grepv='grep -v'
alias c='clear'
alias ipe='ipconfig getifaddr en0'
alias ipw='ipconfig getifaddr en1'
alias ls='ls -Gp'
alias topcpu='top -n10 -ocpu'

# Config Management
alias dotfiles='cd ~/.dotfiles'
alias ealias='vim ~/.dotfiles/bash/aliases'
alias ebashconf='vim ~/.dotfiles/bash/config'
alias ebashfunc='vim ~/.dotfiles/bash/functions'
alias ebashrc='vim ~/.dotfiles/bashrc'
alias egitconf="vim ~/.dotfiles/gitconfig -c 'setfiletype gitconfig'"
alias eirbrc='vim ~/.dotfiles/irbrc'
alias escreenrc='vim ~/.dotfiles/screenrc'
alias evimrc='vim ~/.dotfiles/vimrc'
alias salias='. ~/.dotfiles/bash/aliases'
alias sbashconf='. ~/.dotfiles/bash/config'
alias sbashrc='. ~/.dotfiles/bashrc'

# Git
alias g='git'

# Testing
alias bake='bundle exec rake'
alias rtf='bake test:functionals'
alias rtp='bake parallel:prepare && bake parallel:test parallel:spec'
alias rtu='bake test:units'

# Databases
alias db-backup-production='heroku pgbackups:capture --expire HEROKU_POSTGRESQL_WHITE_URL --app levelup-production'
alias db-download-backup='curl -o tmp/levelup-production-$(date "+%Y%m%d").dump `heroku pgbackups:url --app levelup-production`'
alias db-pending-migrations='bake db:abort_if_pending_migrations'
alias db-reset-staging='heroku pg:reset DATABASE --app levelup-staging'
alias db-restore-production-backup-to-development='bake db:drop db:create && pg_restore -j4 --verbose --clean --no-acl --no-owner -d levelup_development `ls -1 tmp/levelup-production-* | tail -1`'
alias db-restore-production-backup-to-staging='heroku pgbackups:restore DATABASE `heroku pgbackups:url --app levelup-production` --app levelup-staging'

# Heroku staging
alias hsc='heroku run rails console --app levelup-staging'
alias hsl='heroku logs --tail --app levelup-staging'
alias hsp='watch heroku ps --app levelup-staging'
alias hsr='heroku releases --app levelup-staging'

# Heroku production
alias hpc='heroku run rails console --app levelup-production'
alias hpl='heroku logs --tail --app levelup-production'
alias hpp='watch heroku ps --app levelup-production'
alias hpr='heroku releases --app levelup-production'
